<div *ngIf="enabled">

  <chat-window #chatWindow [chatlist]="chatlist" (onMessage)="addMyMessage($event)" (onclose)="close()"></chat-window>

  <div #bffmain class="container" (click)="onmouseOver()">
    <!-- <i *ngIf="!isOpen" class="fa fa-commenting fa-3x icon"></i> -->
    <!-- <img *ngIf="!isOpen" src="assets/help.svg" alt="" height="50"> -->
    <div *ngIf="!isOpen" class="bubble"></div>
    <span *ngIf="isOpen" class="comment-section">



      <!-- <button [disabled]="!commenttext" class="chat-butn" (click)="onChat()">
      <i class="fa fa-comment-o " aria-hidden="true"></i>
    </button> -->
      <!-- <button class="help-butn" (click)="onHelp()"><i class="fa fa-question"></i></button> -->
      <!-- <span *ngIf="!emotionSelected" class="emojis">
        <img pTooltip="negative feedback" class="emojiButn" src="assets/unhappy.png" alt="" height="30" (click)="emotionClick(1)">
        <img pTooltip="positive feedback" class="emojiButn" src="assets/happy.png" alt="" height="30" (click)="emotionClick(0)">
      </span> -->

      <!--  <div class="help-div">
        <button pTooltip="guide me" class="help-butn" (click)="onHelp()">
          <i class="fa fa-magic"></i>
        </button>
      </div> -->


      <div *ngIf="currentAnswear.end==true" style="margin:8px 0 0 10px;text-align: center">
        <button (click)="onstartOver()">start over</button>
      </div>

      <div *ngIf="currentAnswear.uitype==0">
        <input #inp class="input-field" type="text" (keyup)="onkeyup($event)" placeholder="comment / ask me something">
        <button [disabled]="!inp.value" class="send-butn" (click)="onInputClick()">
          <i class="fa fa-paper-plane" aria-hidden="true"></i>
        </button>
      </div>

      <div *ngIf="currentAnswear.options" style="margin:8px 0 0 10px;text-align: center">
        <span *ngIf="currentAnswear.uitype==1">
          <button *ngFor="let butn of currentAnswear.options" (click)="butnClick(butn)">{{butn.title}}</button>
        </span>

        <div *ngIf="currentAnswear.uitype==2" style="text-align: center;" class="slidecontainer">
          <input #myRange type="range" [min]="(currentAnswear.payload[0]-1)" [max]="currentAnswear.payload[1]" [value]="rate"
            class="slider" (change)="onSlideChange($event)">

          <span style="margin-left:25%;display:flex;width:50%;text-align: center;justify-content:space-evenly">
            <small *ngFor="let item of [0,1,2,3,4,5]">{{item?item:' '}}</small>
          </span>
        </div>



        <div *ngIf="currentAnswear && currentAnswear.uitype==3" style="text-align: center; height:100px;">

          <!--span *ngFor="let item of currentAnswear.payload">
            <input type="checkbox" [value]="item" label="item">
            <label style="color:white" for="item">{{item}}</label>
        </span-->
        <div *ngFor="let item of currentAnswear.payload" class="info-block block-info clearfix">
        <div data-toggle="buttons" class="btn-group itemcontent">
                        <label class="btn btn-default">
                            <div class="itemcontent">
                                <input type="checkbox" [value]="item" label="item" name="var_id[]" autocomplete="off">
                                <span class="fa fa-key fa-2x"></span>
                                <label style="color:white" for="item">{{item}}</label>
                            </div>
                        </label>
                    </div>
                </div>


          <button style="margin:0px 10px;" (click)="butnClick(currentAnswear)">done</button>

        </div>
      </div>

      <p style="margin-left:20px;color:white" *ngIf="sended">message sent</p>
    </span>

  </div>

  <span *ngIf="isOpen" class="tooltiptext">click anywhere to close</span>
  <div #mask *ngIf="isOpen" class="mask" (click)="onmaskClick()">

  </div>

</div>
